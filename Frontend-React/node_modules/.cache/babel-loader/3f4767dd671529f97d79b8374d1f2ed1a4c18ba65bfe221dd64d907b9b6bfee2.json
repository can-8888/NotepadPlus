{"ast":null,"code":"const API_URL = 'http://localhost:5000/api';\nexport const api = {\n  // Auth operations\n  login: async credentials => {\n    const response = await fetch(`${API_URL}/auth/login`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(credentials)\n    });\n    if (!response.ok) {\n      const error = await response.text();\n      throw new Error(error || 'Login failed');\n    }\n    return response.json();\n  },\n  register: async userData => {\n    const response = await fetch(`${API_URL}/auth/register`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(userData)\n    });\n    if (!response.ok) {\n      const error = await response.text();\n      throw new Error(error || 'Registration failed');\n    }\n    return response.json();\n  },\n  // Note operations\n  getNotes: async () => {\n    const response = await fetch(`${API_URL}/notes`);\n    if (!response.ok) {\n      const error = await response.text();\n      throw new Error(error || 'Failed to fetch notes');\n    }\n    return response.json();\n  },\n  createNote: async note => {\n    const response = await fetch(`${API_URL}/notes`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        title: note.title,\n        content: note.content,\n        category: note.category,\n        userId: note.userId\n      })\n    });\n    if (!response.ok) {\n      const error = await response.text();\n      throw new Error(error || 'Failed to create note');\n    }\n    return response.json();\n  },\n  updateNote: async (id, note) => {\n    const response = await fetch(`${API_URL}/notes/${id}`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json'\n      },\n      body: JSON.stringify({\n        id,\n        title: note.title || '',\n        content: note.content || '',\n        category: note.category || '',\n        userId: note.userId\n      })\n    });\n    const text = await response.text();\n    if (!response.ok) {\n      throw new Error(text || 'Failed to update note');\n    }\n    if (!text) {\n      throw new Error('No response from server');\n    }\n    try {\n      return JSON.parse(text);\n    } catch (err) {\n      console.error('Failed to parse response:', text);\n      throw new Error('Invalid response from server');\n    }\n  },\n  deleteNote: async id => {\n    const response = await fetch(`${API_URL}/notes/${id}`, {\n      method: 'DELETE'\n    });\n    if (!response.ok) {\n      const error = await response.text();\n      throw new Error(error || 'Failed to delete note');\n    }\n  }\n};","map":{"version":3,"names":["API_URL","api","login","credentials","response","fetch","method","headers","body","JSON","stringify","ok","error","text","Error","json","register","userData","getNotes","createNote","note","title","content","category","userId","updateNote","id","parse","err","console","deleteNote"],"sources":["D:/_master/v5/notepad-plus/src/services/api.ts"],"sourcesContent":["import { Note, User } from '../types/Note';\r\nimport { LoginRequest, RegisterRequest } from '../types/Auth';\r\n\r\nconst API_URL = 'http://localhost:5000/api';\r\n\r\nexport const api = {\r\n    // Auth operations\r\n    login: async (credentials: LoginRequest): Promise<User> => {\r\n        const response = await fetch(`${API_URL}/auth/login`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify(credentials),\r\n        });\r\n        if (!response.ok) {\r\n            const error = await response.text();\r\n            throw new Error(error || 'Login failed');\r\n        }\r\n        return response.json();\r\n    },\r\n\r\n    register: async (userData: RegisterRequest): Promise<User> => {\r\n        const response = await fetch(`${API_URL}/auth/register`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify(userData),\r\n        });\r\n        if (!response.ok) {\r\n            const error = await response.text();\r\n            throw new Error(error || 'Registration failed');\r\n        }\r\n        return response.json();\r\n    },\r\n\r\n    // Note operations\r\n    getNotes: async (): Promise<Note[]> => {\r\n        const response = await fetch(`${API_URL}/notes`);\r\n        if (!response.ok) {\r\n            const error = await response.text();\r\n            throw new Error(error || 'Failed to fetch notes');\r\n        }\r\n        return response.json();\r\n    },\r\n\r\n    createNote: async (note: Partial<Note>): Promise<Note> => {\r\n        const response = await fetch(`${API_URL}/notes`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({\r\n                title: note.title,\r\n                content: note.content,\r\n                category: note.category,\r\n                userId: note.userId\r\n            }),\r\n        });\r\n        if (!response.ok) {\r\n            const error = await response.text();\r\n            throw new Error(error || 'Failed to create note');\r\n        }\r\n        return response.json();\r\n    },\r\n\r\n    updateNote: async (id: number, note: Partial<Note>): Promise<Note> => {\r\n        const response = await fetch(`${API_URL}/notes/${id}`, {\r\n            method: 'PUT',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Accept': 'application/json'\r\n            },\r\n            body: JSON.stringify({\r\n                id,\r\n                title: note.title || '',\r\n                content: note.content || '',\r\n                category: note.category || '',\r\n                userId: note.userId\r\n            }),\r\n        });\r\n\r\n        const text = await response.text();\r\n        \r\n        if (!response.ok) {\r\n            throw new Error(text || 'Failed to update note');\r\n        }\r\n\r\n        if (!text) {\r\n            throw new Error('No response from server');\r\n        }\r\n\r\n        try {\r\n            return JSON.parse(text);\r\n        } catch (err) {\r\n            console.error('Failed to parse response:', text);\r\n            throw new Error('Invalid response from server');\r\n        }\r\n    },\r\n\r\n    deleteNote: async (id: number): Promise<void> => {\r\n        const response = await fetch(`${API_URL}/notes/${id}`, {\r\n            method: 'DELETE',\r\n        });\r\n        if (!response.ok) {\r\n            const error = await response.text();\r\n            throw new Error(error || 'Failed to delete note');\r\n        }\r\n    },\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}