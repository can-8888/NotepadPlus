{"ast":null,"code":"import { NoteStatus, getNoteStatus } from '../types/Note';\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\n\n// Add logging to verify the URL\nconsole.log('API_URL:', API_URL);\n\n// Update the user type to match C# casing\n\n// Export getCurrentUser function\nexport const getCurrentUser = () => {\n  try {\n    const userJson = localStorage.getItem('user');\n    if (!userJson) return null;\n    const rawUser = JSON.parse(userJson);\n    if (!rawUser) return null;\n\n    // Convert PascalCase to camelCase\n    return {\n      id: rawUser.Id || rawUser.id,\n      username: rawUser.Username || rawUser.username,\n      email: rawUser.Email || rawUser.email,\n      createdAt: new Date(rawUser.CreatedAt || rawUser.createdAt)\n    };\n  } catch {\n    return null;\n  }\n};\n\n// Add at the top of the file with other utility functions\nconst getToken = () => {\n  const user = getCurrentUser();\n  if (!user) return null;\n  // If you store the token separately in localStorage\n  return localStorage.getItem('token');\n};\nexport const api = {\n  // Auth operations\n  login: async credentials => {\n    const response = await fetch(`${API_URL}/auth/login`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(credentials)\n    });\n    if (!response.ok) {\n      const error = await response.text();\n      throw new Error(error || 'Login failed');\n    }\n    const userData = await response.json();\n\n    // Format the user data to camelCase\n    const formattedUser = {\n      id: userData.Id || userData.id,\n      username: userData.Username || userData.username,\n      email: userData.Email || userData.email,\n      createdAt: new Date(userData.CreatedAt || userData.createdAt)\n    };\n    localStorage.setItem('user', JSON.stringify(formattedUser));\n    return formattedUser;\n  },\n  register: async userData => {\n    const response = await fetch(`${API_URL}/auth/register`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(userData)\n    });\n    if (!response.ok) {\n      const error = await response.text();\n      throw new Error(error || 'Registration failed');\n    }\n    return response.json();\n  },\n  // Note operations\n  getNotes: async () => {\n    const user = getCurrentUser();\n    if (!(user !== null && user !== void 0 && user.id)) {\n      throw new Error('User not authenticated');\n    }\n    try {\n      const response = await fetch(`${API_URL}/notes`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json',\n          'UserId': user.id.toString()\n        }\n      });\n      if (!response.ok) {\n        throw new Error('Failed to fetch notes');\n      }\n      const notes = await response.json();\n      return notes.map(note => ({\n        ...note,\n        createdAt: new Date(note.createdAt),\n        updatedAt: new Date(note.updatedAt),\n        status: getNoteStatus(note.status)\n      }));\n    } catch (error) {\n      console.error('Error fetching notes:', error);\n      throw error;\n    }\n  },\n  createNote: async note => {\n    const user = getCurrentUser();\n    if (!(user !== null && user !== void 0 && user.id)) {\n      throw new Error('User not authenticated');\n    }\n    try {\n      const noteData = {\n        title: note.title || '',\n        content: note.content || '',\n        category: note.category || '',\n        userId: user.id,\n        status: NoteStatus.Personal,\n        isPublic: false\n      };\n      console.log('Creating note with data:', noteData);\n      const response = await fetch(`${API_URL}/notes`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json',\n          'UserId': user.id.toString()\n        },\n        body: JSON.stringify(noteData)\n      });\n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error('Create note error response:', errorText);\n        throw new Error(errorText || 'Failed to create note');\n      }\n      const createdNote = await response.json();\n      return {\n        ...createdNote,\n        createdAt: new Date(createdNote.createdAt),\n        updatedAt: new Date(createdNote.updatedAt),\n        status: getNoteStatus(createdNote.status)\n      };\n    } catch (error) {\n      console.error('Create note error:', error);\n      throw error;\n    }\n  },\n  updateNote: async (id, note) => {\n    try {\n      const response = await fetch(`${API_URL}/notes/${id}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          id,\n          title: note.title || '',\n          content: note.content || '',\n          category: note.category || '',\n          userId: note.userId\n        })\n      });\n      if (!response.ok) {\n        const error = await response.text();\n        throw new Error(error || 'Failed to update note');\n      }\n      const updatedNote = await response.json();\n      return {\n        ...updatedNote,\n        createdAt: new Date(updatedNote.createdAt),\n        updatedAt: new Date(updatedNote.updatedAt)\n      };\n    } catch (err) {\n      console.error('Update error:', err);\n      throw err;\n    }\n  },\n  deleteNote: async id => {\n    const user = getCurrentUser();\n    if (!(user !== null && user !== void 0 && user.id)) {\n      throw new Error('User not authenticated');\n    }\n    try {\n      const response = await fetch(`${API_URL}/notes/${id}`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json',\n          'UserId': user.id.toString()\n        }\n      });\n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error('Delete note error:', errorText);\n        throw new Error(errorText || `Failed to delete note (${response.status})`);\n      }\n    } catch (error) {\n      console.error('Delete note error:', error);\n      throw error;\n    }\n  },\n  shareNote: async (noteId, collaboratorId) => {\n    const user = getCurrentUser();\n    if (!(user !== null && user !== void 0 && user.id)) {\n      throw new Error('User not authenticated');\n    }\n    try {\n      console.log(`Sharing note ${noteId} with user ${collaboratorId}`);\n      const response = await fetch(`${API_URL}/notes/${noteId}/share`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json',\n          'UserId': user.id.toString()\n        },\n        body: JSON.stringify({\n          collaboratorId: collaboratorId\n        })\n      });\n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error('Share note error:', errorText);\n        throw new Error(errorText || `Failed to share note (${response.status})`);\n      }\n      const result = await response.json();\n\n      // Update the local note with the new status and collaborators\n      return {\n        ...result.note,\n        createdAt: new Date(result.note.createdAt),\n        updatedAt: new Date(result.note.updatedAt),\n        status: getNoteStatus(result.note.status),\n        isShared: true\n      };\n    } catch (error) {\n      console.error('Share note error:', error);\n      throw error;\n    }\n  },\n  getSharedNotes: async () => {\n    const user = getCurrentUser();\n    if (!(user !== null && user !== void 0 && user.id)) {\n      throw new Error('User not authenticated');\n    }\n    const response = await fetch(`${API_URL}/notes/shared`, {\n      headers: {\n        'Content-Type': 'application/json',\n        'UserId': user.id.toString()\n      }\n    });\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.message || 'Failed to fetch shared notes');\n    }\n    const notes = await response.json();\n    return notes.map(note => ({\n      ...note,\n      createdAt: new Date(note.createdAt),\n      updatedAt: new Date(note.updatedAt)\n    }));\n  },\n  makeNotePublic: async noteId => {\n    const user = getCurrentUser();\n    if (!(user !== null && user !== void 0 && user.id)) {\n      throw new Error('User not authenticated');\n    }\n    console.log('makeNotePublic called with:', {\n      noteId,\n      userId: user.id,\n      currentStatus: NoteStatus.Public\n    });\n    try {\n      const response = await fetch(`${API_URL}/notes/${noteId}/make-public`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json',\n          'UserId': user.id.toString()\n        }\n      });\n      if (!response.ok) {\n        const errorText = await response.text();\n        throw new Error(`Failed to make note public: ${errorText}`);\n      }\n      const data = await response.json();\n      console.log('Server response:', data);\n\n      // Convert to Note object with numeric enum value\n      const note = {\n        id: data.id,\n        title: data.title,\n        content: data.content,\n        category: data.category || '',\n        userId: data.userId,\n        owner: data.owner,\n        status: getNoteStatus(2),\n        // Explicitly use numeric value\n        isPublic: true,\n        createdAt: new Date(data.createdAt),\n        updatedAt: new Date(data.updatedAt)\n      };\n      console.log('Converted note with status:', {\n        note,\n        statusType: typeof note.status,\n        statusValue: NoteStatus[note.status]\n      });\n      return note;\n    } catch (error) {\n      console.error('Make note public error:', error);\n      throw error;\n    }\n  },\n  searchUsers: async searchTerm => {\n    const user = getCurrentUser();\n    if (!(user !== null && user !== void 0 && user.id)) {\n      throw new Error('User not authenticated');\n    }\n    console.log('Starting user search with term:', searchTerm);\n    console.log('Current user:', user);\n    try {\n      // Use lowercase 'users' in the URL\n      const url = new URL(`${API_URL}/users/search`);\n      url.searchParams.append('term', searchTerm);\n      console.log('Request URL:', url.toString());\n      const headers = {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json',\n        'UserId': user.id.toString()\n      };\n      console.log('Request headers:', headers);\n\n      // Test the controller first\n      const pingResponse = await fetch(`${API_URL}/users/ping`);\n      console.log('Ping response:', await pingResponse.text());\n      const response = await fetch(url.toString(), {\n        method: 'GET',\n        headers\n      });\n      console.log('Response status:', response.status);\n      console.log('Response headers:', Object.fromEntries(response.headers.entries()));\n      const responseText = await response.text();\n      console.log('Raw response text:', responseText);\n      if (!response.ok) {\n        console.error('Response not OK:', {\n          status: response.status,\n          statusText: response.statusText,\n          body: responseText\n        });\n        throw new Error(responseText || `HTTP error! status: ${response.status}`);\n      }\n      if (!responseText.trim()) {\n        console.warn('Empty response received');\n        return [];\n      }\n      try {\n        const data = JSON.parse(responseText);\n        console.log('Parsed response data:', data);\n        if (!data.users) {\n          console.error('Response missing users array:', data);\n          return [];\n        }\n        const mappedUsers = data.users.map(user => ({\n          id: user.id,\n          username: user.username,\n          email: user.email,\n          createdAt: new Date(user.createdAt)\n        }));\n        console.log('Mapped users:', mappedUsers);\n        return mappedUsers;\n      } catch (parseError) {\n        console.error('JSON parse error:', parseError);\n        throw new Error('Invalid JSON response from server');\n      }\n    } catch (error) {\n      console.error('Search users error:', {\n        error,\n        message: error instanceof Error ? error.message : 'Unknown error'\n      });\n      throw error instanceof Error ? error : new Error('Failed to search users');\n    }\n  },\n  getPublicNotes: async () => {\n    const user = getCurrentUser();\n    if (!(user !== null && user !== void 0 && user.id)) {\n      throw new Error('User not authenticated');\n    }\n    try {\n      console.log('Fetching public notes');\n      const response = await fetch(`${API_URL}/notes/public`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json',\n          'UserId': user.id.toString()\n        }\n      });\n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error('Failed to fetch public notes:', errorText);\n        throw new Error('Failed to fetch public notes');\n      }\n      const notes = await response.json();\n      console.log('Received public notes:', notes);\n      return notes.map(note => ({\n        ...note,\n        createdAt: new Date(note.createdAt || note.CreatedAt),\n        updatedAt: new Date(note.updatedAt || note.UpdatedAt),\n        status: NoteStatus.Public,\n        isPublic: true\n      }));\n    } catch (error) {\n      console.error('Error fetching public notes:', error);\n      throw error;\n    }\n  },\n  getSharedWithMeNotes: async () => {\n    const user = getCurrentUser();\n    if (!(user !== null && user !== void 0 && user.id)) {\n      throw new Error('User not authenticated');\n    }\n    try {\n      const response = await fetch(`${API_URL}/notes/shared`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json',\n          'UserId': user.id.toString()\n        }\n      });\n      if (!response.ok) {\n        const errorText = await response.text();\n        throw new Error(errorText || 'Failed to fetch shared notes');\n      }\n      const notes = await response.json();\n      return notes.map(note => ({\n        ...note,\n        createdAt: new Date(note.createdAt || note.CreatedAt),\n        updatedAt: new Date(note.updatedAt || note.UpdatedAt),\n        status: getNoteStatus(note.status || note.Status),\n        isShared: true\n      }));\n    } catch (error) {\n      console.error('Error fetching shared notes:', error);\n      throw error;\n    }\n  }\n};","map":{"version":3,"names":["NoteStatus","getNoteStatus","API_URL","process","env","REACT_APP_API_URL","console","log","getCurrentUser","userJson","localStorage","getItem","rawUser","JSON","parse","id","Id","username","Username","email","Email","createdAt","Date","CreatedAt","getToken","user","api","login","credentials","response","fetch","method","headers","body","stringify","ok","error","text","Error","userData","json","formattedUser","setItem","register","getNotes","toString","notes","map","note","updatedAt","status","createNote","noteData","title","content","category","userId","Personal","isPublic","errorText","createdNote","updateNote","updatedNote","err","deleteNote","shareNote","noteId","collaboratorId","result","isShared","getSharedNotes","message","makeNotePublic","currentStatus","Public","data","owner","statusType","statusValue","searchUsers","searchTerm","url","URL","searchParams","append","pingResponse","Object","fromEntries","entries","responseText","statusText","trim","warn","users","mappedUsers","parseError","getPublicNotes","UpdatedAt","getSharedWithMeNotes","Status"],"sources":["D:/_master/v5/notepad-plus/src/services/api.ts"],"sourcesContent":["import { Note, User, NoteApiResponse, NoteStatus, convertApiResponseToNote, getNoteStatus } from '../types/Note';\r\nimport { LoginRequest, RegisterRequest } from '../types/Auth';\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\r\n\r\n// Add logging to verify the URL\r\nconsole.log('API_URL:', API_URL);\r\n\r\n// Update the user type to match C# casing\r\ninterface CurrentUser {\r\n    Id: number;  // Changed from id to Id\r\n    Username: string;  // Changed from username to Username\r\n}\r\n\r\n// Export getCurrentUser function\r\nexport const getCurrentUser = (): User | null => {\r\n    try {\r\n        const userJson = localStorage.getItem('user');\r\n        if (!userJson) return null;\r\n\r\n        const rawUser = JSON.parse(userJson);\r\n        if (!rawUser) return null;\r\n\r\n        // Convert PascalCase to camelCase\r\n        return {\r\n            id: rawUser.Id || rawUser.id,\r\n            username: rawUser.Username || rawUser.username,\r\n            email: rawUser.Email || rawUser.email,\r\n            createdAt: new Date(rawUser.CreatedAt || rawUser.createdAt)\r\n        };\r\n    } catch {\r\n        return null;\r\n    }\r\n};\r\n\r\n// Add at the top of the file with other utility functions\r\nconst getToken = (): string | null => {\r\n    const user = getCurrentUser();\r\n    if (!user) return null;\r\n    // If you store the token separately in localStorage\r\n    return localStorage.getItem('token');\r\n};\r\n\r\nexport const api = {\r\n    // Auth operations\r\n    login: async (credentials: LoginRequest): Promise<User> => {\r\n        const response = await fetch(`${API_URL}/auth/login`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify(credentials),\r\n        });\r\n\r\n        if (!response.ok) {\r\n            const error = await response.text();\r\n            throw new Error(error || 'Login failed');\r\n        }\r\n\r\n        const userData = await response.json();\r\n        \r\n        // Format the user data to camelCase\r\n        const formattedUser = {\r\n            id: userData.Id || userData.id,\r\n            username: userData.Username || userData.username,\r\n            email: userData.Email || userData.email,\r\n            createdAt: new Date(userData.CreatedAt || userData.createdAt)\r\n        };\r\n\r\n        localStorage.setItem('user', JSON.stringify(formattedUser));\r\n        return formattedUser;\r\n    },\r\n\r\n    register: async (userData: RegisterRequest): Promise<User> => {\r\n        const response = await fetch(`${API_URL}/auth/register`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify(userData),\r\n        });\r\n        if (!response.ok) {\r\n            const error = await response.text();\r\n            throw new Error(error || 'Registration failed');\r\n        }\r\n        return response.json();\r\n    },\r\n\r\n    // Note operations\r\n    getNotes: async (): Promise<Note[]> => {\r\n        const user = getCurrentUser();\r\n        if (!user?.id) {\r\n            throw new Error('User not authenticated');\r\n        }\r\n\r\n        try {\r\n            const response = await fetch(`${API_URL}/notes`, {\r\n                method: 'GET',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Accept': 'application/json',\r\n                    'UserId': user.id.toString()\r\n                }\r\n            });\r\n\r\n            if (!response.ok) {\r\n                throw new Error('Failed to fetch notes');\r\n            }\r\n\r\n            const notes = await response.json();\r\n            return notes.map((note: any) => ({\r\n                ...note,\r\n                createdAt: new Date(note.createdAt),\r\n                updatedAt: new Date(note.updatedAt),\r\n                status: getNoteStatus(note.status)\r\n            }));\r\n        } catch (error) {\r\n            console.error('Error fetching notes:', error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    createNote: async (note: Partial<Note>): Promise<Note> => {\r\n        const user = getCurrentUser();\r\n        if (!user?.id) {\r\n            throw new Error('User not authenticated');\r\n        }\r\n\r\n        try {\r\n            const noteData = {\r\n                title: note.title || '',\r\n                content: note.content || '',\r\n                category: note.category || '',\r\n                userId: user.id,\r\n                status: NoteStatus.Personal,\r\n                isPublic: false\r\n            };\r\n\r\n            console.log('Creating note with data:', noteData);\r\n\r\n            const response = await fetch(`${API_URL}/notes`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Accept': 'application/json',\r\n                    'UserId': user.id.toString()\r\n                },\r\n                body: JSON.stringify(noteData)\r\n            });\r\n\r\n            if (!response.ok) {\r\n                const errorText = await response.text();\r\n                console.error('Create note error response:', errorText);\r\n                throw new Error(errorText || 'Failed to create note');\r\n            }\r\n\r\n            const createdNote = await response.json();\r\n            return {\r\n                ...createdNote,\r\n                createdAt: new Date(createdNote.createdAt),\r\n                updatedAt: new Date(createdNote.updatedAt),\r\n                status: getNoteStatus(createdNote.status)\r\n            };\r\n        } catch (error) {\r\n            console.error('Create note error:', error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    updateNote: async (id: number, note: Partial<Note>): Promise<Note> => {\r\n        try {\r\n            const response = await fetch(`${API_URL}/notes/${id}`, {\r\n                method: 'PUT',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify({\r\n                    id,\r\n                    title: note.title || '',\r\n                    content: note.content || '',\r\n                    category: note.category || '',\r\n                    userId: note.userId\r\n                }),\r\n            });\r\n\r\n            if (!response.ok) {\r\n                const error = await response.text();\r\n                throw new Error(error || 'Failed to update note');\r\n            }\r\n\r\n            const updatedNote = await response.json();\r\n            return {\r\n                ...updatedNote,\r\n                createdAt: new Date(updatedNote.createdAt),\r\n                updatedAt: new Date(updatedNote.updatedAt)\r\n            };\r\n        } catch (err) {\r\n            console.error('Update error:', err);\r\n            throw err;\r\n        }\r\n    },\r\n\r\n    deleteNote: async (id: number): Promise<void> => {\r\n        const user = getCurrentUser();\r\n        if (!user?.id) {\r\n            throw new Error('User not authenticated');\r\n        }\r\n\r\n        try {\r\n            const response = await fetch(`${API_URL}/notes/${id}`, {\r\n                method: 'DELETE',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Accept': 'application/json',\r\n                    'UserId': user.id.toString()\r\n                }\r\n            });\r\n\r\n            if (!response.ok) {\r\n                const errorText = await response.text();\r\n                console.error('Delete note error:', errorText);\r\n                throw new Error(errorText || `Failed to delete note (${response.status})`);\r\n            }\r\n        } catch (error) {\r\n            console.error('Delete note error:', error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    shareNote: async (noteId: number, collaboratorId: number): Promise<Note> => {\r\n        const user = getCurrentUser();\r\n        if (!user?.id) {\r\n            throw new Error('User not authenticated');\r\n        }\r\n\r\n        try {\r\n            console.log(`Sharing note ${noteId} with user ${collaboratorId}`);\r\n            const response = await fetch(`${API_URL}/notes/${noteId}/share`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Accept': 'application/json',\r\n                    'UserId': user.id.toString()\r\n                },\r\n                body: JSON.stringify({\r\n                    collaboratorId: collaboratorId\r\n                })\r\n            });\r\n\r\n            if (!response.ok) {\r\n                const errorText = await response.text();\r\n                console.error('Share note error:', errorText);\r\n                throw new Error(errorText || `Failed to share note (${response.status})`);\r\n            }\r\n\r\n            const result = await response.json();\r\n            \r\n            // Update the local note with the new status and collaborators\r\n            return {\r\n                ...result.note,\r\n                createdAt: new Date(result.note.createdAt),\r\n                updatedAt: new Date(result.note.updatedAt),\r\n                status: getNoteStatus(result.note.status),\r\n                isShared: true\r\n            };\r\n        } catch (error) {\r\n            console.error('Share note error:', error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    getSharedNotes: async (): Promise<Note[]> => {\r\n        const user = getCurrentUser();\r\n        if (!user?.id) {\r\n            throw new Error('User not authenticated');\r\n        }\r\n\r\n        const response = await fetch(`${API_URL}/notes/shared`, {\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'UserId': user.id.toString()\r\n            }\r\n        });\r\n        \r\n        if (!response.ok) {\r\n            const error = await response.json();\r\n            throw new Error(error.message || 'Failed to fetch shared notes');\r\n        }\r\n        \r\n        const notes = await response.json();\r\n        return notes.map((note: any) => ({\r\n            ...note,\r\n            createdAt: new Date(note.createdAt),\r\n            updatedAt: new Date(note.updatedAt)\r\n        }));\r\n    },\r\n\r\n    makeNotePublic: async (noteId: number): Promise<Note> => {\r\n        const user = getCurrentUser();\r\n        if (!user?.id) {\r\n            throw new Error('User not authenticated');\r\n        }\r\n\r\n        console.log('makeNotePublic called with:', {\r\n            noteId,\r\n            userId: user.id,\r\n            currentStatus: NoteStatus.Public\r\n        });\r\n\r\n        try {\r\n            const response = await fetch(`${API_URL}/notes/${noteId}/make-public`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Accept': 'application/json',\r\n                    'UserId': user.id.toString()\r\n                }\r\n            });\r\n\r\n            if (!response.ok) {\r\n                const errorText = await response.text();\r\n                throw new Error(`Failed to make note public: ${errorText}`);\r\n            }\r\n\r\n            const data = await response.json();\r\n            console.log('Server response:', data);\r\n\r\n            // Convert to Note object with numeric enum value\r\n            const note: Note = {\r\n                id: data.id,\r\n                title: data.title,\r\n                content: data.content,\r\n                category: data.category || '',\r\n                userId: data.userId,\r\n                owner: data.owner,\r\n                status: getNoteStatus(2),  // Explicitly use numeric value\r\n                isPublic: true,\r\n                createdAt: new Date(data.createdAt),\r\n                updatedAt: new Date(data.updatedAt)\r\n            };\r\n\r\n            console.log('Converted note with status:', {\r\n                note,\r\n                statusType: typeof note.status,\r\n                statusValue: NoteStatus[note.status]\r\n            });\r\n\r\n            return note;\r\n        } catch (error) {\r\n            console.error('Make note public error:', error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    searchUsers: async (searchTerm: string): Promise<User[]> => {\r\n        const user = getCurrentUser();\r\n        if (!user?.id) {\r\n            throw new Error('User not authenticated');\r\n        }\r\n\r\n        console.log('Starting user search with term:', searchTerm);\r\n        console.log('Current user:', user);\r\n\r\n        try {\r\n            // Use lowercase 'users' in the URL\r\n            const url = new URL(`${API_URL}/users/search`);\r\n            url.searchParams.append('term', searchTerm);\r\n            console.log('Request URL:', url.toString());\r\n\r\n            const headers = {\r\n                'Content-Type': 'application/json',\r\n                'Accept': 'application/json',\r\n                'UserId': user.id.toString()\r\n            };\r\n            console.log('Request headers:', headers);\r\n\r\n            // Test the controller first\r\n            const pingResponse = await fetch(`${API_URL}/users/ping`);\r\n            console.log('Ping response:', await pingResponse.text());\r\n\r\n            const response = await fetch(url.toString(), {\r\n                method: 'GET',\r\n                headers\r\n            });\r\n\r\n            console.log('Response status:', response.status);\r\n            console.log('Response headers:', Object.fromEntries(response.headers.entries()));\r\n            \r\n            const responseText = await response.text();\r\n            console.log('Raw response text:', responseText);\r\n\r\n            if (!response.ok) {\r\n                console.error('Response not OK:', {\r\n                    status: response.status,\r\n                    statusText: response.statusText,\r\n                    body: responseText\r\n                });\r\n                throw new Error(responseText || `HTTP error! status: ${response.status}`);\r\n            }\r\n\r\n            if (!responseText.trim()) {\r\n                console.warn('Empty response received');\r\n                return [];\r\n            }\r\n\r\n            try {\r\n                const data = JSON.parse(responseText);\r\n                console.log('Parsed response data:', data);\r\n\r\n                if (!data.users) {\r\n                    console.error('Response missing users array:', data);\r\n                    return [];\r\n                }\r\n\r\n                const mappedUsers = data.users.map((user: any) => ({\r\n                    id: user.id,\r\n                    username: user.username,\r\n                    email: user.email,\r\n                    createdAt: new Date(user.createdAt)\r\n                }));\r\n                console.log('Mapped users:', mappedUsers);\r\n                return mappedUsers;\r\n\r\n            } catch (parseError) {\r\n                console.error('JSON parse error:', parseError);\r\n                throw new Error('Invalid JSON response from server');\r\n            }\r\n        } catch (error) {\r\n            console.error('Search users error:', {\r\n                error,\r\n                message: error instanceof Error ? error.message : 'Unknown error'\r\n            });\r\n            throw error instanceof Error ? error : new Error('Failed to search users');\r\n        }\r\n    },\r\n\r\n    getPublicNotes: async (): Promise<Note[]> => {\r\n        const user = getCurrentUser();\r\n        if (!user?.id) {\r\n            throw new Error('User not authenticated');\r\n        }\r\n\r\n        try {\r\n            console.log('Fetching public notes');\r\n            const response = await fetch(`${API_URL}/notes/public`, {\r\n                method: 'GET',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Accept': 'application/json',\r\n                    'UserId': user.id.toString()\r\n                }\r\n            });\r\n\r\n            if (!response.ok) {\r\n                const errorText = await response.text();\r\n                console.error('Failed to fetch public notes:', errorText);\r\n                throw new Error('Failed to fetch public notes');\r\n            }\r\n\r\n            const notes = await response.json();\r\n            console.log('Received public notes:', notes);\r\n\r\n            return notes.map((note: any) => ({\r\n                ...note,\r\n                createdAt: new Date(note.createdAt || note.CreatedAt),\r\n                updatedAt: new Date(note.updatedAt || note.UpdatedAt),\r\n                status: NoteStatus.Public,\r\n                isPublic: true\r\n            }));\r\n        } catch (error) {\r\n            console.error('Error fetching public notes:', error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    getSharedWithMeNotes: async (): Promise<Note[]> => {\r\n        const user = getCurrentUser();\r\n        if (!user?.id) {\r\n            throw new Error('User not authenticated');\r\n        }\r\n\r\n        try {\r\n            const response = await fetch(`${API_URL}/notes/shared`, {\r\n                method: 'GET',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Accept': 'application/json',\r\n                    'UserId': user.id.toString()\r\n                }\r\n            });\r\n\r\n            if (!response.ok) {\r\n                const errorText = await response.text();\r\n                throw new Error(errorText || 'Failed to fetch shared notes');\r\n            }\r\n\r\n            const notes = await response.json();\r\n            return notes.map((note: any) => ({\r\n                ...note,\r\n                createdAt: new Date(note.createdAt || note.CreatedAt),\r\n                updatedAt: new Date(note.updatedAt || note.UpdatedAt),\r\n                status: getNoteStatus(note.status || note.Status),\r\n                isShared: true\r\n            }));\r\n        } catch (error) {\r\n            console.error('Error fetching shared notes:', error);\r\n            throw error;\r\n        }\r\n    },\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}