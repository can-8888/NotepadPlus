{"ast":null,"code":"var _jsxFileName = \"D:\\\\_master\\\\v5\\\\notepad-plus\\\\src\\\\components\\\\NoteEditor.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from 'react';\nimport { signalRService } from '../services/signalR';\nimport './NoteEditor.css'; // Make sure this is the exact path\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst NoteEditor = ({\n  note,\n  onSave,\n  onCancel\n}) => {\n  _s();\n  const [title, setTitle] = React.useState('');\n  const [content, setContent] = React.useState('');\n  const [category, setCategory] = React.useState('');\n  const [isSaving, setIsSaving] = React.useState(false);\n  const [collaborators, setCollaborators] = React.useState([]);\n  const contentRef = useRef(null);\n  const lastUpdateRef = useRef(0);\n  const updateTimeoutRef = useRef();\n  const typingTimeoutRef = useRef();\n  useEffect(() => {\n    if (note) {\n      // Editing existing note\n      setTitle(note.title);\n      setContent(note.content);\n      setCategory(note.category);\n\n      // Join the note's SignalR group\n      signalRService.joinNote(note.id);\n\n      // Listen for updates from other users\n      signalRService.onNoteUpdated((noteId, updatedContent) => {\n        if (noteId === note.id) {\n          setContent(updatedContent);\n        }\n      });\n\n      // Enhanced collaborator tracking\n      signalRService.onCollaboratorJoined(username => {\n        setCollaborators(prev => [...prev, {\n          username,\n          isTyping: false\n        }]);\n      });\n      signalRService.onCollaboratorLeft(username => {\n        setCollaborators(prev => prev.filter(c => c.username !== username));\n      });\n\n      // Typing indicators\n      signalRService.onUserStartedTyping(username => {\n        setCollaborators(prev => prev.map(c => c.username === username ? {\n          ...c,\n          isTyping: true\n        } : c));\n      });\n      signalRService.onUserStoppedTyping(username => {\n        setCollaborators(prev => prev.map(c => c.username === username ? {\n          ...c,\n          isTyping: false\n        } : c));\n      });\n\n      // Cursor tracking\n      signalRService.onCursorMoved((username, position) => {\n        setCollaborators(prev => prev.map(c => c.username === username ? {\n          ...c,\n          cursorPosition: position\n        } : c));\n        showCollaboratorCursor(username, position);\n      });\n    } else {\n      // Creating new note\n      setTitle('');\n      setContent('');\n      setCategory('');\n    }\n    return () => {\n      if (note) {\n        signalRService.leaveNote(note.id);\n        signalRService.removeAllHandlers(); // Clean up event handlers\n      }\n      if (typingTimeoutRef.current) {\n        clearTimeout(typingTimeoutRef.current);\n      }\n    };\n  }, [note === null || note === void 0 ? void 0 : note.id]);\n  const showCollaboratorCursor = (username, position) => {\n    var _contentRef$current$p;\n    if (!contentRef.current) return;\n    const existingCursor = document.querySelector(`.collaborator-cursor-${username}`);\n    existingCursor === null || existingCursor === void 0 ? void 0 : existingCursor.remove();\n    const cursor = document.createElement('div');\n    cursor.className = `collaborator-cursor collaborator-cursor-${username}`;\n    cursor.setAttribute('data-username', username);\n    cursor.style.color = getColorForUsername(username);\n    const {\n      top,\n      left\n    } = calculateCursorPosition(position);\n    cursor.style.top = `${top}px`;\n    cursor.style.left = `${left}px`;\n    (_contentRef$current$p = contentRef.current.parentElement) === null || _contentRef$current$p === void 0 ? void 0 : _contentRef$current$p.appendChild(cursor);\n    setTimeout(() => cursor.remove(), 2000);\n  };\n  const calculateCursorPosition = position => {\n    if (!contentRef.current) return {\n      top: 0,\n      left: 0\n    };\n    const textArea = contentRef.current;\n    const textBeforeCursor = content.substring(0, position);\n    const lines = textBeforeCursor.split('\\n');\n    const lineHeight = 20; // Approximate line height\n    const charWidth = 8; // Approximate character width\n\n    return {\n      top: (lines.length - 1) * lineHeight,\n      left: lines[lines.length - 1].length * charWidth\n    };\n  };\n  const getColorForUsername = username => {\n    const colors = ['#2196f3', '#4caf50', '#f44336', '#ff9800', '#9c27b0'];\n    let hash = 0;\n    for (let i = 0; i < username.length; i++) {\n      hash = username.charCodeAt(i) + ((hash << 5) - hash);\n    }\n    return colors[Math.abs(hash) % colors.length];\n  };\n  const handleContentChange = e => {\n    const newContent = e.target.value;\n    setContent(newContent);\n\n    // Notify typing started\n    if (note) {\n      signalRService.notifyTypingStarted(note.id);\n\n      // Clear existing timeout\n      if (typingTimeoutRef.current) {\n        clearTimeout(typingTimeoutRef.current);\n      }\n\n      // Set new timeout to notify typing stopped\n      typingTimeoutRef.current = setTimeout(() => {\n        if (note) {\n          signalRService.notifyTypingStopped(note.id);\n        }\n      }, 1000);\n\n      // Throttle content updates\n      const now = Date.now();\n      if (now - lastUpdateRef.current > 500) {\n        signalRService.updateNote(note.id, newContent);\n        lastUpdateRef.current = now;\n      } else {\n        if (updateTimeoutRef.current) {\n          clearTimeout(updateTimeoutRef.current);\n        }\n        updateTimeoutRef.current = setTimeout(() => {\n          signalRService.updateNote(note.id, newContent);\n          lastUpdateRef.current = Date.now();\n        }, 500);\n      }\n    }\n  };\n  const updateCursorPosition = () => {\n    if (!note || !contentRef.current) return;\n    const textarea = contentRef.current;\n    const cursorPosition = textarea.selectionStart;\n    signalRService.updateCursorPosition(note.id, cursorPosition);\n  };\n  const handleMouseMove = e => {\n    updateCursorPosition();\n  };\n  const handleKeyUp = e => {\n    updateCursorPosition();\n  };\n  const handleSave = async () => {\n    try {\n      setIsSaving(true);\n      await onSave({\n        ...(note || {}),\n        // Spread existing note if editing, empty object if creating\n        title,\n        content,\n        category\n      });\n      if (!note) {\n        // Clear form after creating new note\n        setTitle('');\n        setContent('');\n        setCategory('');\n      }\n    } finally {\n      setIsSaving(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"note-editor\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: note ? 'Edit Note' : 'Create Note'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 13\n    }, this), collaborators.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"collaborators\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"Currently editing: \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 21\n      }, this), collaborators.map(collaborator => /*#__PURE__*/_jsxDEV(\"span\", {\n        className: `collaborator-badge ${collaborator.isTyping ? 'typing' : ''}`,\n        style: {\n          backgroundColor: getColorForUsername(collaborator.username)\n        },\n        children: [collaborator.username, collaborator.isTyping && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"typing-indicator\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 55\n        }, this)]\n      }, collaborator.username, true, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 25\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      placeholder: \"Title\",\n      value: title,\n      onChange: e => setTitle(e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      placeholder: \"Category\",\n      value: category,\n      onChange: e => setCategory(e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n      ref: contentRef,\n      placeholder: \"Note content...\",\n      value: content,\n      onChange: handleContentChange,\n      onClick: handleMouseMove,\n      onKeyUp: handleKeyUp\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"button-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSave,\n        disabled: isSaving,\n        children: isSaving ? 'Saving...' : note ? 'Save' : 'Create'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onCancel,\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 209,\n    columnNumber: 9\n  }, this);\n};\n_s(NoteEditor, \"xTQ/NHZsS90rWi8Kw5Q77AKlC5s=\");\n_c = NoteEditor;\nexport default NoteEditor;\nvar _c;\n$RefreshReg$(_c, \"NoteEditor\");","map":{"version":3,"names":["React","useEffect","useRef","signalRService","jsxDEV","_jsxDEV","NoteEditor","note","onSave","onCancel","_s","title","setTitle","useState","content","setContent","category","setCategory","isSaving","setIsSaving","collaborators","setCollaborators","contentRef","lastUpdateRef","updateTimeoutRef","typingTimeoutRef","joinNote","id","onNoteUpdated","noteId","updatedContent","onCollaboratorJoined","username","prev","isTyping","onCollaboratorLeft","filter","c","onUserStartedTyping","map","onUserStoppedTyping","onCursorMoved","position","cursorPosition","showCollaboratorCursor","leaveNote","removeAllHandlers","current","clearTimeout","_contentRef$current$p","existingCursor","document","querySelector","remove","cursor","createElement","className","setAttribute","style","color","getColorForUsername","top","left","calculateCursorPosition","parentElement","appendChild","setTimeout","textArea","textBeforeCursor","substring","lines","split","lineHeight","charWidth","length","colors","hash","i","charCodeAt","Math","abs","handleContentChange","e","newContent","target","value","notifyTypingStarted","notifyTypingStopped","now","Date","updateNote","updateCursorPosition","textarea","selectionStart","handleMouseMove","handleKeyUp","handleSave","children","fileName","_jsxFileName","lineNumber","columnNumber","collaborator","backgroundColor","type","placeholder","onChange","ref","onClick","onKeyUp","disabled","_c","$RefreshReg$"],"sources":["D:/_master/v5/notepad-plus/src/components/NoteEditor.tsx"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\r\nimport { Note } from '../types/Note';\r\nimport { signalRService } from '../services/signalR';\r\nimport './NoteEditor.css';  // Make sure this is the exact path\r\n\r\ninterface NoteEditorProps {\r\n    note?: Note;\r\n    onSave: (note: Partial<Note>) => Promise<void>;\r\n    onCancel: () => void;\r\n}\r\n\r\ninterface CollaboratorState {\r\n    username: string;\r\n    isTyping: boolean;\r\n    cursorPosition?: number;\r\n}\r\n\r\nconst NoteEditor: React.FC<NoteEditorProps> = ({ note, onSave, onCancel }) => {\r\n    const [title, setTitle] = React.useState('');\r\n    const [content, setContent] = React.useState('');\r\n    const [category, setCategory] = React.useState('');\r\n    const [isSaving, setIsSaving] = React.useState(false);\r\n    const [collaborators, setCollaborators] = React.useState<CollaboratorState[]>([]);\r\n    const contentRef = useRef<HTMLTextAreaElement>(null);\r\n    const lastUpdateRef = useRef<number>(0);\r\n    const updateTimeoutRef = useRef<NodeJS.Timeout>();\r\n    const typingTimeoutRef = useRef<NodeJS.Timeout>();\r\n\r\n    useEffect(() => {\r\n        if (note) {\r\n            // Editing existing note\r\n            setTitle(note.title);\r\n            setContent(note.content);\r\n            setCategory(note.category);\r\n            \r\n            // Join the note's SignalR group\r\n            signalRService.joinNote(note.id);\r\n\r\n            // Listen for updates from other users\r\n            signalRService.onNoteUpdated((noteId, updatedContent) => {\r\n                if (noteId === note.id) {\r\n                    setContent(updatedContent);\r\n                }\r\n            });\r\n\r\n            // Enhanced collaborator tracking\r\n            signalRService.onCollaboratorJoined((username) => {\r\n                setCollaborators(prev => [...prev, { username, isTyping: false }]);\r\n            });\r\n\r\n            signalRService.onCollaboratorLeft((username) => {\r\n                setCollaborators(prev => prev.filter(c => c.username !== username));\r\n            });\r\n\r\n            // Typing indicators\r\n            signalRService.onUserStartedTyping((username) => {\r\n                setCollaborators(prev => \r\n                    prev.map(c => c.username === username ? { ...c, isTyping: true } : c)\r\n                );\r\n            });\r\n\r\n            signalRService.onUserStoppedTyping((username) => {\r\n                setCollaborators(prev => \r\n                    prev.map(c => c.username === username ? { ...c, isTyping: false } : c)\r\n                );\r\n            });\r\n\r\n            // Cursor tracking\r\n            signalRService.onCursorMoved((username, position) => {\r\n                setCollaborators(prev => \r\n                    prev.map(c => c.username === username ? { ...c, cursorPosition: position } : c)\r\n                );\r\n                showCollaboratorCursor(username, position);\r\n            });\r\n        } else {\r\n            // Creating new note\r\n            setTitle('');\r\n            setContent('');\r\n            setCategory('');\r\n        }\r\n\r\n        return () => {\r\n            if (note) {\r\n                signalRService.leaveNote(note.id);\r\n                signalRService.removeAllHandlers(); // Clean up event handlers\r\n            }\r\n            if (typingTimeoutRef.current) {\r\n                clearTimeout(typingTimeoutRef.current);\r\n            }\r\n        };\r\n    }, [note?.id]);\r\n\r\n    const showCollaboratorCursor = (username: string, position: number) => {\r\n        if (!contentRef.current) return;\r\n\r\n        const existingCursor = document.querySelector(`.collaborator-cursor-${username}`);\r\n        existingCursor?.remove();\r\n\r\n        const cursor = document.createElement('div');\r\n        cursor.className = `collaborator-cursor collaborator-cursor-${username}`;\r\n        cursor.setAttribute('data-username', username);\r\n        cursor.style.color = getColorForUsername(username);\r\n\r\n        const { top, left } = calculateCursorPosition(position);\r\n        cursor.style.top = `${top}px`;\r\n        cursor.style.left = `${left}px`;\r\n\r\n        contentRef.current.parentElement?.appendChild(cursor);\r\n        setTimeout(() => cursor.remove(), 2000);\r\n    };\r\n\r\n    const calculateCursorPosition = (position: number) => {\r\n        if (!contentRef.current) return { top: 0, left: 0 };\r\n\r\n        const textArea = contentRef.current;\r\n        const textBeforeCursor = content.substring(0, position);\r\n        const lines = textBeforeCursor.split('\\n');\r\n        const lineHeight = 20; // Approximate line height\r\n        const charWidth = 8; // Approximate character width\r\n\r\n        return {\r\n            top: (lines.length - 1) * lineHeight,\r\n            left: lines[lines.length - 1].length * charWidth\r\n        };\r\n    };\r\n\r\n    const getColorForUsername = (username: string) => {\r\n        const colors = ['#2196f3', '#4caf50', '#f44336', '#ff9800', '#9c27b0'];\r\n        let hash = 0;\r\n        for (let i = 0; i < username.length; i++) {\r\n            hash = username.charCodeAt(i) + ((hash << 5) - hash);\r\n        }\r\n        return colors[Math.abs(hash) % colors.length];\r\n    };\r\n\r\n    const handleContentChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\r\n        const newContent = e.target.value;\r\n        setContent(newContent);\r\n\r\n        // Notify typing started\r\n        if (note) {\r\n            signalRService.notifyTypingStarted(note.id);\r\n            \r\n            // Clear existing timeout\r\n            if (typingTimeoutRef.current) {\r\n                clearTimeout(typingTimeoutRef.current);\r\n            }\r\n\r\n            // Set new timeout to notify typing stopped\r\n            typingTimeoutRef.current = setTimeout(() => {\r\n                if (note) {\r\n                    signalRService.notifyTypingStopped(note.id);\r\n                }\r\n            }, 1000);\r\n\r\n            // Throttle content updates\r\n            const now = Date.now();\r\n            if (now - lastUpdateRef.current > 500) {\r\n                signalRService.updateNote(note.id, newContent);\r\n                lastUpdateRef.current = now;\r\n            } else {\r\n                if (updateTimeoutRef.current) {\r\n                    clearTimeout(updateTimeoutRef.current);\r\n                }\r\n                updateTimeoutRef.current = setTimeout(() => {\r\n                    signalRService.updateNote(note.id, newContent);\r\n                    lastUpdateRef.current = Date.now();\r\n                }, 500);\r\n            }\r\n        }\r\n    };\r\n\r\n    const updateCursorPosition = () => {\r\n        if (!note || !contentRef.current) return;\r\n        const textarea = contentRef.current;\r\n        const cursorPosition = textarea.selectionStart;\r\n        signalRService.updateCursorPosition(note.id, cursorPosition);\r\n    };\r\n\r\n    const handleMouseMove = (e: React.MouseEvent<HTMLTextAreaElement>) => {\r\n        updateCursorPosition();\r\n    };\r\n\r\n    const handleKeyUp = (e: React.KeyboardEvent<HTMLTextAreaElement>) => {\r\n        updateCursorPosition();\r\n    };\r\n\r\n    const handleSave = async () => {\r\n        try {\r\n            setIsSaving(true);\r\n            await onSave({\r\n                ...(note || {}), // Spread existing note if editing, empty object if creating\r\n                title,\r\n                content,\r\n                category\r\n            });\r\n            if (!note) {\r\n                // Clear form after creating new note\r\n                setTitle('');\r\n                setContent('');\r\n                setCategory('');\r\n            }\r\n        } finally {\r\n            setIsSaving(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"note-editor\">\r\n            <h2>{note ? 'Edit Note' : 'Create Note'}</h2>\r\n            {collaborators.length > 0 && (\r\n                <div className=\"collaborators\">\r\n                    <span>Currently editing: </span>\r\n                    {collaborators.map(collaborator => (\r\n                        <span \r\n                            key={collaborator.username} \r\n                            className={`collaborator-badge ${collaborator.isTyping ? 'typing' : ''}`}\r\n                            style={{ backgroundColor: getColorForUsername(collaborator.username) }}\r\n                        >\r\n                            {collaborator.username}\r\n                            {collaborator.isTyping && <span className=\"typing-indicator\" />}\r\n                        </span>\r\n                    ))}\r\n                </div>\r\n            )}\r\n            <input\r\n                type=\"text\"\r\n                placeholder=\"Title\"\r\n                value={title}\r\n                onChange={(e) => setTitle(e.target.value)}\r\n            />\r\n            <input\r\n                type=\"text\"\r\n                placeholder=\"Category\"\r\n                value={category}\r\n                onChange={(e) => setCategory(e.target.value)}\r\n            />\r\n            <textarea\r\n                ref={contentRef}\r\n                placeholder=\"Note content...\"\r\n                value={content}\r\n                onChange={handleContentChange}\r\n                onClick={handleMouseMove}\r\n                onKeyUp={handleKeyUp}\r\n            />\r\n            <div className=\"button-group\">\r\n                <button \r\n                    onClick={handleSave}\r\n                    disabled={isSaving}\r\n                >\r\n                    {isSaving ? 'Saving...' : (note ? 'Save' : 'Create')}\r\n                </button>\r\n                <button onClick={onCancel}>Cancel</button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default NoteEditor;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}